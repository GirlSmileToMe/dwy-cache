!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.dwyCache=t():e.dwyCache=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FIFOStrategy=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(1);t.FIFOStrategy=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Strategy),n(t,[{key:"put",value:function(e){this.dataStore.push(e)}},{key:"beforePut",value:function(){this.dataStore.length>=this.max&&this.dataStore.shift()}},{key:"afterHit",value:function(){}}]),t}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.Strategy=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"put",value:function(e){}},{key:"beforePut",value:function(){}},{key:"afterHit",value:function(){}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.deprecated=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(r,i,a){if("function"!=typeof a.value)throw new SyntaxError("Only functions can be marked as deprecated");var u=e+"#"+i;return n({},a,{value:function(){return console.warn("DEPRECATION "+u+": "+o+t),a.value.apply(this,arguments)}})}};var o="This function will be removed in future versions."},function(e,t,r){"use strict";var n,o,i,a;Object.defineProperty(t,"__esModule",{value:!0}),t.CacheList=t.CacheModel=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=(r(1),r(2));function s(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=t.CacheModel=function(){function e(t,r,n){f(this,e),this.name=t,this.value=r,this.createdAt=this.usedAt=Date.now(),this.frequency=1,this.expire=n}return u(e,[{key:"increaseFrequency",value:function(){return this.frequency++,this}},{key:"updateUsedTime",value:function(){return this.usedAt=Date.now(),this}},{key:"reset",value:function(){return this.createdAt=this.usedAt=Date.now(),this.frequency=1,this}},{key:"isExpired",get:function(){var e=this.expire,t=this.usedAt;return"number"==typeof e&&Date.now()-t>=e}}]),e}();t.CacheList=(n=(0,c.deprecated)("CacheList","please use prop `last` instead."),o=(0,c.deprecated)("CacheList","please use prop `first` instead."),i=(0,c.deprecated)("CacheList","please use prop `length` instead."),s((a=function(){function e(t){f(this,e);var r=t||{},n=r.max,o=void 0===n?10:n,i=r.strategy,a=r.expire;this.max=o,this._strategy=i,this.expire=a,this.dataStore=[]}return u(e,[{key:"use",value:function(e){this._strategy=e,this.dataStore.forEach(function(e){return e.reset()})}},{key:"put",value:function(e,t,r){var n=new l(e,t,r||this.expire);this.strategy.beforePut.call(this),this.strategy.put.call(this,n)}},{key:"get",value:function(e){var t=this.dataStore.find(function(t){return t.name===e});if(t)return t.isExpired?this.remove(t):(this.strategy.afterHit.call(this,t),t.value)}},{key:"setMax",value:function(e){if("number"!=typeof e)throw new Error("[DwyCache]max should be a number");var t=this.max,r=this.dataStore;this.max=e,r.length<e||e<t&&this.dataStore.splice(0,t-e)}},{key:"remove",value:function(e){var t=this.getItemIndex(e);this.dataStore.splice(t,1)}},{key:"clear",value:function(){this.dataStore=[]}},{key:"getItemIndex",value:function(e){return this.dataStore.indexOf(e)}},{key:"getLast",value:function(){return this.last}},{key:"getFirst",value:function(){return this.first}},{key:"getLength",value:function(){return this.dataStore.length}},{key:"strategy",get:function(){if(!this._strategy)throw new Error("must set strategy first.set strategy via cacheList.use(strategy)");return this._strategy}},{key:"last",get:function(){var e=this.dataStore[this.length-1];return e?this.get(e.name):null}},{key:"first",get:function(){var e=this.dataStore[0];return e?this.get(e.name):null}},{key:"length",get:function(){return this.dataStore.length}}]),e}()).prototype,"getLast",[n],Object.getOwnPropertyDescriptor(a.prototype,"getLast"),a.prototype),s(a.prototype,"getFirst",[o],Object.getOwnPropertyDescriptor(a.prototype,"getFirst"),a.prototype),s(a.prototype,"getLength",[i],Object.getOwnPropertyDescriptor(a.prototype,"getLength"),a.prototype),a)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LFUStrategy=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0);t.LFUStrategy=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.FIFOStrategy),n(t,[{key:"put",value:function(e){this.dataStore.unshift(e)}},{key:"afterHit",value:function(e){var t=this.dataStore;e.increaseFrequency(),e.updateUsedTime(),t.sort(function(e,t){return e.frequency===t.frequency?e.usedAt-t.usedAt:e.frequency-t.frequency})}}]),t}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LRUStrategy=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0);t.LRUStrategy=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.FIFOStrategy),n(t,[{key:"afterHit",value:function(e){var t=this.dataStore,r=this.getItemIndex(e);t.splice(r,1),t.push(e)}}]),t}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CacheList=t.LFUStrategy=t.LRUStrategy=t.FIFOStrategy=void 0;var n=r(0);Object.defineProperty(t,"FIFOStrategy",{enumerable:!0,get:function(){return n.FIFOStrategy}});var o=r(5);Object.defineProperty(t,"LRUStrategy",{enumerable:!0,get:function(){return o.LRUStrategy}});var i=r(4);Object.defineProperty(t,"LFUStrategy",{enumerable:!0,get:function(){return i.LFUStrategy}});var a=r(3);t.default=a.CacheList,t.CacheList=a.CacheList}])});